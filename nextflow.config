params.runtime_opts = ""

manifest {
    defaultBranch = "main"
    description = "Demos of using Nextflow for imagery pipelines"
    version = "1.0.0"
    nextflowVersion = "20.10.0"
}

profiles {

    standard {
        docker.enabled = false
        singularity.enabled = true
    }

    aws {
        docker.enabled = true
        singularity.enabled = false
        aws {
            batch.cliPath = '/home/ec2-user/miniconda/bin/aws'
        }
        process {
            executor = 'awsbatch'
            queue = 'janelia-nextflow-tower-connect'
        }
    }

    tower {
        docker.enabled = true
        singularity.enabled = false
        aws {
            batch.cliPath = '/home/ec2-user/miniconda/bin/aws'
        }
        process {
            executor = 'awsbatch'
        }
    }
}

docker {
    temp = "auto"
    runOptions = "${params.runtime_opts}"
}

singularity {
    autoMounts = true
    cacheDir = "$HOME/.singularity_cache"
    runOptions = "${params.runtime_opts}"
}

